---
import { getCollection } from "astro:content";
import NewLayout from "../../components/NewLayout.astro";
import BlogCard from "../../components/BlogCard.astro";

const allPosts = await getCollection("blog");
const sortedPosts = allPosts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<NewLayout title="Let's Talk Space â€” Journals" description="Insights on space technology, orbital operations, and the future of the space industry.">
  <!-- Hero -->
  <section class="relative pt-32 pb-16 sm:pt-40 sm:pb-20">
    <div class="absolute top-1/3 right-1/4 w-72 h-72 bg-violet-500/10 rounded-full blur-[120px]"></div>
    <div class="relative z-10 max-w-4xl mx-auto px-6 lg:px-8 text-center">
      <p class="text-cyan-400 text-xs uppercase tracking-[0.3em] mb-4 font-medium">Blog</p>
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6">
        Let's Talk
        <span class="bg-gradient-to-r from-cyan-400 to-violet-400 bg-clip-text text-transparent">Space</span>
      </h1>
      <p class="text-gray-400 text-lg leading-relaxed max-w-2xl mx-auto">
        Thoughts on space technology, orbital operations, and building the future of the space industry.
      </p>
    </div>
  </section>

  <!-- Posts Grid -->
  <section class="relative pb-24 sm:pb-32">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
      {sortedPosts.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {sortedPosts.map((post) => (
            <BlogCard
              title={post.data.title}
              description={post.data.description}
              date={post.data.date}
              slug={post.id}
              tags={post.data.tags}
            />
          ))}
        </div>
      ) : (
        <div class="text-center py-16">
          <p class="text-gray-500 text-lg">No posts yet. Check back soon.</p>
        </div>
      )}
    </div>
  </section>
</NewLayout>
